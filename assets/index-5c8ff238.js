(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const i="c48e0be2ada84eb994ab6bae7233731b",d=new URLSearchParams(window.location.search),s=d.get("code");if(!s)l(i),console.log("autocode!");else{const e=await m(i,s),n=await f(e);console.log(n),g(n)}async function l(e){const n=u(128),a=await p(n);localStorage.setItem("verifier",n);const t=new URLSearchParams;t.append("client_id",e),t.append("response_type","code"),t.append("redirect_uri","https://maikonkc.github.io/who_are_your_drugs/callback"),t.append("scope","user-top-read"),t.append("code_challenge_method","S256"),t.append("code_challenge",a),document.location=`https://accounts.spotify.com/authorize?${t.toString()}`}function u(e){console.log("generatecode!");let n="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<e;t++)n+=a.charAt(Math.floor(Math.random()*a.length));return n}async function p(e){const n=new TextEncoder().encode(e),a=await window.crypto.subtle.digest("SHA-256",n);return btoa(String.fromCharCode.apply(null,[...new Uint8Array(a)])).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function m(e,n){console.log("getaccesstoken!");const a=localStorage.getItem("verifier"),t=new URLSearchParams;t.append("client_id",e),t.append("grant_type","authorization_code"),t.append("code",n),t.append("redirect_uri","https://maikonkc.github.io/who_are_your_drugs/callback"),t.append("code_verifier",a);const o=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),{access_token:r}=await o.json();return r}async function f(e){return console.log("fetchitens!"),await(await fetch("https://api.spotify.com/v1/me/top/artists",{method:"GET",headers:{Authorization:`Bearer ${e}`}})).json()}function g(e){document.getElementById("artist0").innerText=e.items[0].name,document.getElementById("artist1").innerText=e.items[1].name,document.getElementById("artist2").innerText=e.items[2].name,document.getElementById("artist3").innerText=e.items[3].name,document.getElementById("artist4").innerText=e.items[4].name,document.getElementById("artist5").innerText=e.items[5].name,document.getElementById("artist6").innerText=e.items[6].name,document.getElementById("artist7").innerText=e.items[7].name,document.getElementById("artist8").innerText=e.items[8].name,document.getElementById("artist9").innerText=e.items[9].name}
